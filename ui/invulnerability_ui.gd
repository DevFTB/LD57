extends Range

@export var player: Player
@export var timer: Timer
func _ready() -> void:
	update()
	player.invulnerability_unlocked.connect(update)

func _process(_delta: float) -> void:
	if visible and timer:
		update()

func update() -> void:
	ratio = 1 - timer.time_left / timer.wait_time
	var invulnerability_unlocked = player.invulnerability_duration > 0
	visible = invulnerability_unlocked
